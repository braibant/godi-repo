# This file was automatically generated by godiva version 0.9.7
.include "../../mk/bsd.prefs.mk"

VERSION=	2.0.3
PKG=		godi-ocamlscript
PKGNAME=	${PKG}-${VERSION}
PKGREVISION=	0
DISTNAME=	ocamlscript-${VERSION}
DISTFILES=	ocamlscript-${VERSION}.tar.gz
CATEGORIES=	godi
MASTER_SITES=	http://mjambon.com/releases/ocamlscript/
MAINTAINER=	Martin Jambon <martin@mjambon.com>
HOMEPAGE=	http://mjambon.com/ocamlscript.html
COMMENT=	native code scripts

# confopt defaults:

MAKE_FLAGS=     PREFIX=${PREFIX} LIBDIR=${PREFIX}/lib BINDIR=${PREFIX}/bin MANDIR=${PREFIX}/man 
DEPENDS+=	godi-ocaml>=3.08:../../godi/godi-ocaml
BUILD_DEPENDS+= godi-findlib-[0-9]*:../../godi/godi-findlib

USE_GMAKE=	yes
MAKE_ENV+=	${BUILD_OCAMLFIND_ENV} PKGBASE=${PKGBASE:Q}

ALL_TARGET=	all
.if ${GODI_HAVE_OCAMLOPT} == "yes"
ALL_TARGET+=	opt
.endif
ALL_TARGET+=	htdoc

post-install:
	@mkdir -p ${PREFIX}/doc/${PKG}
.	for DOC in LICENSE README TODO 
	    install -m 0644 ${WRKSRC}/${DOC} ${PREFIX}/doc/${PKG}
.	endfor
	cd "${WRKSRC}/doc/ocamlscript" && godi_pax -rw -pp html ${PREFIX}/doc/${PKG}
.	if defined(W32PORT) && ${W32PORT} == "mingw"
	mv ${PREFIX}/bin/ocamlscript.exe ${PREFIX}/bin/ocamlscript_real.exe
	install -m 0755 files/ocamlscript ${PREFIX}/bin
.	endif

.include "../../mk/bsd.pkg.mk"
